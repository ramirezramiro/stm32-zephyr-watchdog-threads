# ==== Core stacks ====
CONFIG_MAIN_STACK_SIZE=1568
CONFIG_ISR_STACK_SIZE=1024
CONFIG_IDLE_STACK_SIZE=320

# ==== Storage / persistence ====
# Flash/NVS requires flash driver enabled explicitly on this part
CONFIG_FLASH=y
CONFIG_FLASH_PAGE_LAYOUT=y
CONFIG_FLASH_MAP=y
CONFIG_NVS=y

# ---- Console / Serial ----
CONFIG_CONSOLE=y
CONFIG_UART_CONSOLE=y
CONFIG_SERIAL=y
CONFIG_THREAD_NAME=y

# ---- Logging to UART (no printk routing) ----
CONFIG_LOG=y
CONFIG_LOG_BACKEND_UART=y
CONFIG_LOG_MODE_IMMEDIATE=y        # immediate = safest on tiny MCUs
CONFIG_LOG_DEFAULT_LEVEL=3

# Keep printk enabled if the board wants it, but don't route printk into LOG
CONFIG_LOG_PRINTK=n

# ---- Drivers ----
CONFIG_GPIO=y
CONFIG_HWINFO=y                    # for hwinfo_get_reset_cause()

#our code will control wdg, not default setup
CONFIG_WDT_DISABLE_AT_BOOT=y
CONFIG_WATCHDOG=y

# ---- Fault dump (replace any FATAL_EXCEPTION_DUMP usage) ----
CONFIG_FAULT_DUMP=1              

# Enable reboot & system management
CONFIG_REBOOT=y

# Application tuning
CONFIG_APP_WATCHDOG_BOOT_TIMEOUT_MS=8000
CONFIG_APP_WATCHDOG_STEADY_TIMEOUT_MS=2000
CONFIG_APP_WATCHDOG_RETUNE_DELAY_MS=5000
CONFIG_APP_RESET_WATCHDOG_THRESHOLD=3
CONFIG_APP_HEALTH_LED_STALE_MS=1500
CONFIG_APP_HEALTH_SYS_STALE_MS=1500
CONFIG_APP_ENABLE_UART_COMMANDS=n
CONFIG_APP_SAFE_MODE_REBOOT_DELAY_MS=60000

# Thread configuration
CONFIG_THREAD_MONITOR=y
CONFIG_THREAD_STACK_INFO=y

# Recovery + supervisor require event support
CONFIG_EVENTS=y
